<ion-header>
  <ion-toolbar class="toolbar-container">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="home" class="back-button"></ion-back-button>
    </ion-buttons>
    <ion-title></ion-title>
  </ion-toolbar>
</ion-header>
<div id="container"  (press)="dbclicked(devices)">
<div class ="top">
  <ion-searchbar (ionInput)="filterDevice($event)" placeholder="Search bar" class="search" type="text"></ion-searchbar>
  <svg (click)="openProfile()" class="profile" xmlns="http://www.w3.org/2000/svg" width="36.969" height="37" viewBox="0 0 36.969 37">
    <path id="Path_17" data-name="Path 17" d="M20.5,2A18.519,18.519,0,0,0,6.892,33.038h0a18.519,18.519,0,0,0,27.223,0h0A18.519,18.519,0,0,0,20.5,2Zm0,33.334a14.815,14.815,0,0,1-10.278-4.167,11.111,11.111,0,0,1,20.556,0A14.815,14.815,0,0,1,20.5,35.334ZM16.8,16.815a3.7,3.7,0,1,1,3.7,3.7A3.7,3.7,0,0,1,16.8,16.815ZM33.3,27.927a14.815,14.815,0,0,0-7.241-6.259,7.408,7.408,0,1,0-11.111,0,14.815,14.815,0,0,0-7.241,6.259,14.667,14.667,0,0,1-2.019-7.408,14.815,14.815,0,1,1,29.631,0A14.667,14.667,0,0,1,33.3,27.927Z" transform="translate(-2.019 -2)" fill="#7e7e7e"/>
  </svg>
</div>
  

  <!-- <ion-card *ngFor="let device of room[1]"> -->
  <!-- <ion-card-header>{{device}}</ion-card-header> -->
  <ion-grid class="room-device">
    <ion-select class="roomsDropdown" (ionChange)="roomChange($event,i)" value="{{room[0]}}" okText="Okay"
      cancelText="Dismiss">
      <ion-select-option *ngFor="let room of room[2]" value="{{room}}">{{room}}</ion-select-option>
    </ion-select>

    <!-- <ion-list>
        <ion-item>
          <ion-range color="danger" pin="false"></ion-range>
          
        </ion-item>
         
      </ion-list> -->

      <app-color-picker (colorPickerShow)="colorPickerShow(e)" [ngClass]="colorPickerPopup=='block'? 'show':'hide'"></app-color-picker>
    <!-- <ion-row class="row" (press)="dbclicked(devices)" [ngClass]="colorPickerPopup !='block'? 'show':'hide'" >
      <div class='elements' *ngFor="let device of room[1]" [ngClass]="device.display=='block'? 'show':'hide'">
        <ng-template [ngIf]="device.device==='RGB'">
          <div id=RGB (press)="dbclicked(devices)" >
          <div ng-if="device.display=='none'" (click)="alter(device,room)" class="RGB"
            [ngClass]="device.display=='block'? 'show':'hide'">
            <svg (click)="colorPickerShow('block')" class="normal-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="51.849" height="50.094" viewBox="0 0 51.849 50.094">
              <defs>
                <filter id="Path_74" x="16.924" y="12.017" width="34.924" height="38.077" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha"/>
                  <feGaussianBlur stdDeviation="3" result="blur"/>
                  <feFlood flood-opacity="0.161"/>
                  <feComposite operator="in" in2="blur"/>
                  <feComposite in="SourceGraphic"/>
                </filter>
                <filter id="Path_75" x="0" y="12.017" width="34.924" height="38.077" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha"/>
                  <feGaussianBlur stdDeviation="3" result="blur-2"/>
                  <feFlood flood-opacity="0.161"/>
                  <feComposite operator="in" in2="blur-2"/>
                  <feComposite in="SourceGraphic"/>
                </filter>
                <filter id="Path_76" x="6.545" y="0" width="38.759" height="34.06" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha"/>
                  <feGaussianBlur stdDeviation="3" result="blur-3"/>
                  <feFlood flood-opacity="0.161"/>
                  <feComposite operator="in" in2="blur-3"/>
                  <feComposite in="SourceGraphic"/>
                </filter>
              </defs>
              <g id="palette-print-svgrepo-com" transform="translate(9 -7.272)">
                <g transform="matrix(1, 0, 0, 1, -9, 7.27)" filter="url(#Path_74)">
                  <path id="Path_74-2" data-name="Path 74" d="M267.733,195.753A10.379,10.379,0,1,1,256,212.8l2.1-11.3,8.146-6.455A10.469,10.469,0,0,1,267.733,195.753Z" transform="translate(-230.08 -177.03)" fill="#ffce47"/>
                </g>
                <g transform="matrix(1, 0, 0, 1, -9, 7.27)" filter="url(#Path_75)">
                  <path id="Path_75-2" data-name="Path 75" d="M5.192,195.753A10.379,10.379,0,1,0,16.925,212.8l-2.1-11.3-8.146-6.455A10.469,10.469,0,0,0,5.192,195.753Z" transform="translate(9 -177.03)" fill="#ff4181"/>
                </g>
                <g transform="matrix(1, 0, 0, 1, -9, 7.27)" filter="url(#Path_76)">
                  <path id="Path_76-2" data-name="Path 76" d="M119.76,23.651a10.4,10.4,0,0,1-.129,1.638l-10.25,4.043L99.13,25.289a10.38,10.38,0,1,1,20.63-1.638Z" transform="translate(-83.46 -7.27)" fill="#4eb9ff"/>
                </g>
                <path id="Path_77" data-name="Path 77" d="M205.506,316.957h-7.416a10.392,10.392,0,0,0,3.708,9.694A10.392,10.392,0,0,0,205.506,316.957Z" transform="translate(-184.873 -283.608)" fill="#ff755c"/>
                <path id="Path_78" data-name="Path 78" d="M256,187.01l3.708,6.423a10.394,10.394,0,0,0,6.542-8.06A10.392,10.392,0,0,0,256,187.01Z" transform="translate(-239.075 -160.084)" fill="#85c250"/>
                <path id="Path_79" data-name="Path 79" d="M100.954,185.374a10.394,10.394,0,0,0,6.542,8.06l3.708-6.423A10.392,10.392,0,0,0,100.954,185.374Z" transform="translate(-94.279 -160.084)" fill="#3b8bc0"/>
                <path id="Path_80" data-name="Path 80" d="M206.063,222.666a10.367,10.367,0,0,1,1.263,3.553,10.425,10.425,0,0,1-7.416,0,10.417,10.417,0,0,1,3.708-6.423A10.343,10.343,0,0,1,206.063,222.666Z" transform="translate(-186.693 -192.87)" fill="#174461"/>
              </g>
            </svg>            
            <span class="normal-button-text">{{device.device}}</span>
            <div [ngClass]="device.payload ==0 ? 'on' : 'off'"></div>
          </div>
        </div>
        </ng-template>
        <ng-template [ngIf]="device.device==='light2'" >

          <div  ng-if="device.display=='none'" id="light2">
            <input type="range" min="0" max="100" value="50" id="slider" orient="vertical" (click)="alter(device,room)">
            <span id="light2Name" (click)="alter(device,room)">{{device.device}}</span>
            <div [ngClass]="device.payload ==0 ? 'on' : 'off'" (click)="alter(device,room)"></div>
            <span class="rotate" id="light2Per"></span>
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="42"
              height="57.704" viewBox="0 0 42 57.704" id="light2-svg" (click)="alter(device,room)">
              <defs>
                <linearGradient id="linear-gradient" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                  <stop offset="0" stop-color="#dfc179" />
                  <stop offset="1" stop-color="#ffb300" />
                </linearGradient>
                <filter id="SVGCleanerId_0_1_" x="0" y="0" width="42" height="44.769" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha" />
                  <feGaussianBlur stdDeviation="3" result="blur" />
                  <feFlood flood-opacity="0.161" />
                  <feComposite operator="in" in2="blur" />
                  <feComposite in="SourceGraphic" />
                </filter>
                <filter id="Ellipse_10" x="7.156" y="30.015" width="27.688" height="27.688"
                  filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha" />
                  <feGaussianBlur stdDeviation="3" result="blur-2" />
                  <feFlood flood-opacity="0.161" />
                  <feComposite operator="in" in2="blur-2" />
                  <feComposite in="SourceGraphic" />
                </filter>
                <filter id="Path_24" x="5.13" y="26.49" width="31.74" height="26.369" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha" />
                  <feGaussianBlur stdDeviation="3" result="blur-3" />
                  <feFlood flood-opacity="0.161" />
                  <feComposite operator="in" in2="blur-3" />
                  <feComposite in="SourceGraphic" />
                </filter>
              </defs>
              <g id="light-bulb" transform="translate(-98.378 6)">
                <path id="SVGCleanerId_0"
                  d="M124.2,26.769c0-3.923,7.175-6.154,7.175-14.769a12,12,0,1,0-24,0c0,8.615,7.175,10.846,7.175,14.769Z"
                  fill="#ffc843" />
                <g id="Group_4" data-name="Group 4" transform="translate(107.378)">
                  <g transform="matrix(1, 0, 0, 1, -9, -6)" filter="url(#SVGCleanerId_0_1_)">
                    <path id="SVGCleanerId_0_1_2" data-name="SVGCleanerId_0_1_"
                      d="M124.2,26.769c0-3.923,7.175-6.154,7.175-14.769a12,12,0,1,0-24,0c0,8.615,7.175,10.846,7.175,14.769Z"
                      transform="translate(-98.38 6)" fill="url(#linear-gradient)" />
                  </g>
                </g>
                <g id="Group_5" data-name="Group 5" transform="translate(112.358 13.616)">
                  <path id="Path_18" data-name="Path 18"
                    d="M173.756,182.457a.666.666,0,0,1-.666-.666,10.054,10.054,0,0,0-2.044-6.531,9.508,9.508,0,0,1-1.986-5.957.666.666,0,1,1,1.331,0,8.187,8.187,0,0,0,1.764,5.221,11.433,11.433,0,0,1,2.266,7.267A.665.665,0,0,1,173.756,182.457Z"
                    transform="translate(-169.06 -168.638)" fill="#d49000" />
                  <path id="Path_19" data-name="Path 19"
                    d="M277.207,182.457a.666.666,0,0,1-.666-.666,11.433,11.433,0,0,1,2.266-7.267,8.187,8.187,0,0,0,1.764-5.221.666.666,0,0,1,1.331,0,9.508,9.508,0,0,1-1.986,5.957,10.054,10.054,0,0,0-2.044,6.531A.665.665,0,0,1,277.207,182.457Z"
                    transform="translate(-267.863 -168.638)" fill="#d49000" />
                </g>
                <path id="Path_20" data-name="Path 20"
                  d="M201.172,169.022a.666.666,0,0,1-.519-.249L199,166.719l-1.652,2.054a.666.666,0,0,1-.519.249h0a.666.666,0,0,1-.519-.249l-2.17-2.7a.666.666,0,1,1,1.038-.834l1.652,2.054,1.652-2.054a.666.666,0,0,1,1.038,0l1.652,2.054,1.652-2.054a.666.666,0,1,1,1.038.834l-2.17,2.7A.666.666,0,0,1,201.172,169.022Z"
                  transform="translate(-79.623 -151.67)" fill="#fff" />
                <path id="Path_21" data-name="Path 21"
                  d="M190.877,310.851a3.655,3.655,0,0,1,.433,1.671h9.651a3.654,3.654,0,0,1,.433-1.671Z"
                  transform="translate(-76.757 -285.752)" opacity="0.1" />
                <path id="Path_22" data-name="Path 22"
                  d="M237.373,471.473a1.626,1.626,0,0,0-1.621,1.849,5.321,5.321,0,0,0,3.241,0,1.658,1.658,0,0,0,.015-.213A1.636,1.636,0,0,0,237.373,471.473Z"
                  transform="translate(-117.995 -433.406)" opacity="0.1" />
                <g transform="matrix(1, 0, 0, 1, 98.38, -6)" filter="url(#Ellipse_10)">
                  <circle id="Ellipse_10-2" data-name="Ellipse 10" cx="4.844" cy="4.844" r="4.844"
                    transform="translate(16.16 36.02)" fill="#333e48" />
                </g>
                <path id="Path_23" data-name="Path 23"
                  d="M200.849,371.745a4.844,4.844,0,0,0-4.734,5.869h9.469a4.844,4.844,0,0,0-4.734-5.869Z"
                  transform="translate(-81.471 -341.73)" opacity="0.1" />
                <g transform="matrix(1, 0, 0, 1, 98.38, -6)" filter="url(#Path_24)">
                  <path id="Path_24-2" data-name="Path 24"
                    d="M184.656,334.819a1.644,1.644,0,0,1-1.639,1.639H172.556a1.644,1.644,0,0,1-1.639-1.639v-5.091a1.644,1.644,0,0,1,1.639-1.639h10.462a1.644,1.644,0,0,1,1.639,1.639Z"
                    transform="translate(-156.79 -295.6)" fill="#5c6670" />
                </g>
                <g id="Group_6" data-name="Group 6" transform="translate(112.509 28.44)">
                  <rect id="Rectangle_26" data-name="Rectangle 26" width="13.739" height="1.331"
                    transform="translate(0)" fill="#333e48" />
                  <rect id="Rectangle_27" data-name="Rectangle 27" width="13.739" height="1.331"
                    transform="translate(0 3.139)" fill="#333e48" />
                </g>
              </g>
            </svg>
          </div>

        </ng-template>
        <ng-template [ngIf]="device.device==='chandelier'">
          <div id="chandelier">
          <div ng-if="device.display=='none'" (click)="alter(device,room)" class="chandelier"
            [ngClass]="device.display=='block'? 'show':'hide'">
            <svg class="chandelierSvg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30.477" height="103.363" viewBox="0 0 30.477 103.363">
              <defs>
                <linearGradient id="linear-gradient" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                  <stop offset="0" stop-color="#efb902"/>
                  <stop offset="1" stop-color="#fff"/>
                </linearGradient> 
              </defs>
              <g id="layer1" transform="translate(-37.917 -961.4)">
                <g id="g9356" transform="translate(37.917 961.4)">
                  <g id="g9250" transform="translate(0)">
                    <path id="path9252" d="M-100,32.523a15.239,15.239,0,0,1-15.239,15.238A15.238,15.238,0,0,1-130.48,32.523a15.239,15.239,0,0,1,15.239-15.238A15.238,15.238,0,0,1-100,32.523Z" transform="translate(130.48 55.601)" fill="url(#linear-gradient)"/>
                    <g id="g9254" transform="translate(5.461 0)">
                      <rect id="rect9256" width="18.729" height="14.555" rx="5.768" transform="translate(2.122 73.062) rotate(-90)"/>
                      <rect id="rect9258" width="14.474" height="8.569" stroke-width="2.127" stroke="#000" transform="translate(2.2 68.152)"/>
                      <rect id="rect9260" width="18.932" height="2.43" rx="0.963" transform="translate(0 65.71)" fill="#464444"/>
                      <rect id="rect9262" width="1.434" height="52.454" rx="0.566" transform="translate(8.511 0)"/>
                      <rect id="rect9298" width="3.081" height="2.876" transform="translate(7.891 51.839)"/>
                    </g>
                  </g>
                </g>
              </g>
            </svg>
            
            
            <span id="chandelier-name" class="normal-button-text">{{device.device}}</span>
            <div [ngClass]="device.payload ==0 ? 'on' : 'off'"></div>
          </div>
        </div>
        </ng-template>
        <ng-template [ngIf]="device.device==='light1'">
          <div id="light">
            <div ng-if="device.display=='none'" (click)="alter(device,room)" class="light"
              [ngClass]="device.display=='block'? 'show':'hide'">
              <svg class="normal-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                width="41.221" height="56.907" viewBox="0 0 41.221 56.907">
                <defs>
                  <linearGradient id="linear-gradient" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                    <stop offset="0" stop-color="#dfc179" />
                    <stop offset="1" stop-color="#ffb300" />
                  </linearGradient>
                  <filter id="SVGCleanerId_0_1_" x="0" y="0" width="41.221" height="44.229"
                    filterUnits="userSpaceOnUse">
                    <feOffset dy="3" input="SourceAlpha" />
                    <feGaussianBlur stdDeviation="3" result="blur" />
                    <feFlood flood-opacity="0.161" />
                    <feComposite operator="in" in2="blur" />
                    <feComposite in="SourceGraphic" />
                  </filter>
                  <filter id="Ellipse_10" x="6.934" y="29.415" width="27.373" height="27.493"
                    filterUnits="userSpaceOnUse">
                    <feOffset dy="3" input="SourceAlpha" />
                    <feGaussianBlur stdDeviation="3" result="blur-2" />
                    <feFlood flood-opacity="0.161" />
                    <feComposite operator="in" in2="blur-2" />
                    <feComposite in="SourceGraphic" />
                  </filter>
                  <filter id="Path_24" x="4.967" y="25.955" width="31.294" height="26.2" filterUnits="userSpaceOnUse">
                    <feOffset dy="3" input="SourceAlpha" />
                    <feGaussianBlur stdDeviation="3" result="blur-3" />
                    <feFlood flood-opacity="0.161" />
                    <feComposite operator="in" in2="blur-3" />
                    <feComposite in="SourceGraphic" />
                  </filter>
                </defs>
                <g id="light-bulb" transform="translate(9 6)">
                  <path id="SVGCleanerId_0"
                    d="M123.654,26.229c0-3.844,6.942-6.03,6.942-14.471a11.611,11.611,0,1,0-23.221,0c0,8.441,6.942,10.627,6.942,14.471Z"
                    transform="translate(-107.373 0)" fill="#ffc843" />
                  <g id="Group_4" data-name="Group 4" transform="translate(0 0)">
                    <g transform="matrix(1, 0, 0, 1, -9, -6)" filter="url(#SVGCleanerId_0_1_)">
                      <path id="SVGCleanerId_0_1_2" data-name="SVGCleanerId_0_1_"
                        d="M123.654,26.229c0-3.844,6.942-6.03,6.942-14.471a11.611,11.611,0,1,0-23.221,0c0,8.441,6.942,10.627,6.942,14.471Z"
                        transform="translate(-98.38 6)" fill="url(#linear-gradient)" />
                    </g>
                  </g>
                  <g id="Group_5" data-name="Group 5" transform="translate(4.822 13.315)">
                    <path id="Path_18" data-name="Path 18"
                      d="M173.6,182.178a.649.649,0,0,1-.644-.653,9.937,9.937,0,0,0-1.978-6.4,9.394,9.394,0,0,1-1.921-5.837.655.655,0,0,1,.314-.586.637.637,0,0,1,.659,0,.655.655,0,0,1,.314.586,8.088,8.088,0,0,0,1.707,5.116,11.3,11.3,0,0,1,2.192,7.12.656.656,0,0,1-.188.461.639.639,0,0,1-.455.191Z"
                      transform="translate(-169.059 -168.611)" fill="#d49000" />
                    <path id="Path_19" data-name="Path 19"
                      d="M277.185,182.179a.649.649,0,0,1-.644-.653,11.3,11.3,0,0,1,2.192-7.12,8.088,8.088,0,0,0,1.707-5.116.644.644,0,0,1,1.288,0,9.394,9.394,0,0,1-1.921,5.837,9.937,9.937,0,0,0-1.978,6.4.656.656,0,0,1-.188.461.639.639,0,0,1-.455.191Z"
                      transform="translate(-268.144 -168.612)" fill="#d49000" />
                  </g>
                  <path id="Path_20" data-name="Path 20"
                    d="M200.939,168.94a.641.641,0,0,1-.5-.244l-1.6-2.013-1.6,2.013a.641.641,0,0,1-.5.244h0a.641.641,0,0,1-.5-.244l-2.1-2.646a.659.659,0,0,1-.111-.653.641.641,0,0,1,1.116-.164l1.6,2.013,1.6-2.013a.639.639,0,0,1,1,0l1.6,2.013,1.6-2.013a.641.641,0,0,1,1.116.164.659.659,0,0,1-.111.653l-2.1,2.646A.641.641,0,0,1,200.939,168.94Z"
                    transform="translate(-187.223 -151.938)" fill="#fff" />
                  <path id="Path_21" data-name="Path 21"
                    d="M190.877,310.851a3.617,3.617,0,0,1,.419,1.637h9.338a3.615,3.615,0,0,1,.419-1.637Z"
                    transform="translate(-184.349 -286.258)" opacity="0.1" />
                  <path id="Path_22" data-name="Path 22"
                    d="M237.32,471.473a1.565,1.565,0,0,0-1.193.543,1.607,1.607,0,0,0-.375,1.269,5.086,5.086,0,0,0,3.136,0,1.647,1.647,0,0,0,.015-.209,1.593,1.593,0,0,0-1.582-1.6Z"
                    transform="translate(-225.705 -434.174)" opacity="0.1" />
                  <g transform="matrix(1, 0, 0, 1, -9, -6)" filter="url(#Ellipse_10)">
                    <ellipse id="Ellipse_10-2" data-name="Ellipse 10" cx="4.687" cy="4.746" rx="4.687" ry="4.746"
                      transform="translate(15.93 35.41)" fill="#333e48" />
                  </g>
                  <path id="Path_23" data-name="Path 23"
                    d="M200.692,371.745a4.665,4.665,0,0,0-3.647,1.766,4.792,4.792,0,0,0-.933,3.984h9.162a4.792,4.792,0,0,0-.933-3.984,4.665,4.665,0,0,0-3.648-1.766Z"
                    transform="translate(-189.077 -342.335)" opacity="0.1" />
                  <g transform="matrix(1, 0, 0, 1, -9, -6)" filter="url(#Path_24)">
                    <path id="Path_24-2" data-name="Path 24"
                      d="M184.21,334.683a1.6,1.6,0,0,1-1.586,1.606H172.5a1.6,1.6,0,0,1-1.586-1.606v-4.988a1.6,1.6,0,0,1,1.586-1.606h10.122a1.6,1.6,0,0,1,1.586,1.606Z"
                      transform="translate(-156.95 -296.13)" fill="#5c6670" />
                  </g>
                  <g id="Group_6" data-name="Group 6" transform="translate(4.969 27.866)">
                    <rect id="Rectangle_26" data-name="Rectangle 26" width="13.293" height="1.304" fill="#333e48" />
                    <rect id="Rectangle_27" data-name="Rectangle 27" width="13.293" height="1.304"
                      transform="translate(0 3.076)" fill="#333e48" />
                  </g>
                </g>
              </svg>
              <span class="normal-button-text">{{device.device}}</span>
              <div [ngClass]="device.payload ==0 ? 'on' : 'off'"></div>
            </div>
          </div>
        </ng-template >
        <ng-template [ngIf]="device.device==='fan1'">
        <div id="fan1">
          <div ng-if="device.display=='none'" (click)="alter(device,room)" class="fan1"
            [ngClass]="device.display=='block'? 'show':'hide'">
                <svg class="normal-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50.014" height="61.622" viewBox="0 0 50.014 61.622">
                  <defs>
                    <linearGradient id="linear-gradient" x1="0.5" y1="1.279" x2="0.5" y2="0.177" gradientUnits="objectBoundingBox">
                      <stop offset="0"/>
                      <stop offset="1" stop-color="#616161"/>
                    </linearGradient>
                    <filter id="Path_700" x="0" y="0" width="50.014" height="61.622" filterUnits="userSpaceOnUse">
                      <feOffset dy="2" input="SourceAlpha"/>
                      <feGaussianBlur stdDeviation="3" result="blur"/>
                      <feFlood flood-opacity="0.161"/>
                      <feComposite operator="in" in2="blur"/>
                      <feComposite in="SourceGraphic"/>
                    </filter>
                    <linearGradient id="linear-gradient-2" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                      <stop offset="0" stop-color="#fffefd"/>
                      <stop offset="1" stop-color="#fb0"/>
                    </linearGradient>
                  </defs>
                  <g id="table-fan-svgrepo-com" transform="translate(-38.697 7)">
                    <g transform="matrix(1, 0, 0, 1, 38.7, -7)" filter="url(#Path_700)">
                      <path id="Path_700-2" data-name="Path 700" d="M68.057,35.169c-2.121-.535-1.833-2.36-1.464-3.417a16.008,16.008,0,1,0-5.962-.035c.375,1.05.693,2.911-1.452,3.452-3.042.767-7.146,2.258-7.146,6.042,0,3.213,23.17,3.213,23.17,0C75.2,37.428,71.1,35.936,68.057,35.169ZM49.766,16.007A13.938,13.938,0,1,1,63.7,29.946,13.954,13.954,0,0,1,49.766,16.007ZM62.286,40.3a.651.651,0,1,1-1.3,0v-.948a.651.651,0,1,1,1.3,0Zm2.069,0a.651.651,0,1,1-1.3,0v-.948a.651.651,0,1,1,1.3,0Zm2.069,0a.651.651,0,1,1-1.3,0v-.948a.651.651,0,1,1,1.3,0Z" transform="translate(-38.7 7)" fill="url(#linear-gradient)"/>
                    </g>
                    <path id="Path_701" data-name="Path 701" d="M180.922,124.611a1.91,1.91,0,0,1-1.559,2.994,12.07,12.07,0,0,0,1.513,4.384c1.113,2.086,4.158,2.633,6.8,1.223s3.882-4.245,2.769-6.331C188.733,123.673,183.608,123.287,180.922,124.611Z" transform="translate(-115.645 -108.821)" stroke="#5a5957" stroke-width="1" fill="url(#linear-gradient-2)"/>
                    <path id="Path_702" data-name="Path 702" d="M147.861,48.156a1.908,1.908,0,0,1,3.134,0,13.1,13.1,0,0,0,3.4-2.493c1.7-1.643,1.391-4.721-.691-6.875s-5.147-2.568-6.847-.925c-2.662,2.573-1.541,7.746.541,9.9A2.88,2.88,0,0,0,147.861,48.156Z" transform="translate(-85.723 -32.375)" stroke="#5a5957" stroke-width="1" fill="url(#linear-gradient-2)"/>
                    <path id="Path_703" data-name="Path 703" d="M94.3,125.695a1.9,1.9,0,0,1,.338-1.084c-2.686-1.324-7.81-.938-9.523,2.27-1.113,2.086.126,4.92,2.769,6.331s5.687.863,6.8-1.223a12.065,12.065,0,0,0,1.512-4.384A1.91,1.91,0,0,1,94.3,125.695Z" transform="translate(-32.504 -108.822)" stroke="#5a5957" stroke-width="1" fill="url(#linear-gradient-2)"/>
                  </g>
                </svg>
            <span class="normal-button-text">{{device.device}}</span>
            <div [ngClass]="device.payload ==0 ? 'on' : 'off'"></div>
          </div>
        </div>
      </ng-template >
        <ng-template [ngIf]="device.device==='fan2'">
          <div id="fan2">
          <div ng-if="device.display=='none'" (click)="alter(device,room)" class="fan2"
            [ngClass]="device.display=='block'? 'show':'hide'">
            <svg class="normal-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50.014" height="61.622" viewBox="0 0 50.014 61.622">
              <defs>
                <linearGradient id="linear-gradient" x1="0.5" y1="1.279" x2="0.5" y2="0.177" gradientUnits="objectBoundingBox">
                  <stop offset="0"/>
                  <stop offset="1" stop-color="#616161"/>
                </linearGradient>
                <filter id="Path_700" x="0" y="0" width="50.014" height="61.622" filterUnits="userSpaceOnUse">
                  <feOffset dy="2" input="SourceAlpha"/>
                  <feGaussianBlur stdDeviation="3" result="blur"/>
                  <feFlood flood-opacity="0.161"/>
                  <feComposite operator="in" in2="blur"/>
                  <feComposite in="SourceGraphic"/>
                </filter>
                <linearGradient id="linear-gradient-2" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                  <stop offset="0" stop-color="#fffefd"/>
                  <stop offset="1" stop-color="#fb0"/>
                </linearGradient>
              </defs>
              <g id="table-fan-svgrepo-com" transform="translate(-38.697 7)">
                <g transform="matrix(1, 0, 0, 1, 38.7, -7)" filter="url(#Path_700)">
                  <path id="Path_700-2" data-name="Path 700" d="M68.057,35.169c-2.121-.535-1.833-2.36-1.464-3.417a16.008,16.008,0,1,0-5.962-.035c.375,1.05.693,2.911-1.452,3.452-3.042.767-7.146,2.258-7.146,6.042,0,3.213,23.17,3.213,23.17,0C75.2,37.428,71.1,35.936,68.057,35.169ZM49.766,16.007A13.938,13.938,0,1,1,63.7,29.946,13.954,13.954,0,0,1,49.766,16.007ZM62.286,40.3a.651.651,0,1,1-1.3,0v-.948a.651.651,0,1,1,1.3,0Zm2.069,0a.651.651,0,1,1-1.3,0v-.948a.651.651,0,1,1,1.3,0Zm2.069,0a.651.651,0,1,1-1.3,0v-.948a.651.651,0,1,1,1.3,0Z" transform="translate(-38.7 7)" fill="url(#linear-gradient)"/>
                </g>
                <path id="Path_701" data-name="Path 701" d="M180.922,124.611a1.91,1.91,0,0,1-1.559,2.994,12.07,12.07,0,0,0,1.513,4.384c1.113,2.086,4.158,2.633,6.8,1.223s3.882-4.245,2.769-6.331C188.733,123.673,183.608,123.287,180.922,124.611Z" transform="translate(-115.645 -108.821)" stroke="#5a5957" stroke-width="1" fill="url(#linear-gradient-2)"/>
                <path id="Path_702" data-name="Path 702" d="M147.861,48.156a1.908,1.908,0,0,1,3.134,0,13.1,13.1,0,0,0,3.4-2.493c1.7-1.643,1.391-4.721-.691-6.875s-5.147-2.568-6.847-.925c-2.662,2.573-1.541,7.746.541,9.9A2.88,2.88,0,0,0,147.861,48.156Z" transform="translate(-85.723 -32.375)" stroke="#5a5957" stroke-width="1" fill="url(#linear-gradient-2)"/>
                <path id="Path_703" data-name="Path 703" d="M94.3,125.695a1.9,1.9,0,0,1,.338-1.084c-2.686-1.324-7.81-.938-9.523,2.27-1.113,2.086.126,4.92,2.769,6.331s5.687.863,6.8-1.223a12.065,12.065,0,0,0,1.512-4.384A1.91,1.91,0,0,1,94.3,125.695Z" transform="translate(-32.504 -108.822)" stroke="#5a5957" stroke-width="1" fill="url(#linear-gradient-2)"/>
              </g>
            </svg>
            <span class="normal-button-text">{{device.device}}</span>
            <div [ngClass]="device.payload ==0 ? 'on' : 'off'"></div>
          </div>
          </div>
        </ng-template>
        <ng-template [ngIf]="device.device==='TV'">
          <div ng-if="device.display=='none'" (click)="alter(device,room)" id="TV"
            [ngClass]="device.display=='block'? 'show':'hide'">
            <svg class="normal-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="43" height="43.096" viewBox="0 0 43 43.096">
              <defs>
                <filter id="path22" x="0" y="7.096" width="43" height="36" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha"/>
                  <feGaussianBlur stdDeviation="1.5" result="blur"/>
                  <feFlood flood-opacity="0.161"/>
                  <feComposite operator="in" in2="blur"/>
                  <feComposite in="SourceGraphic"/>
                </filter>
                <filter id="path30" x="13.404" y="0" width="20.192" height="20.192" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha"/>
                  <feGaussianBlur stdDeviation="1.5" result="blur-2"/>
                  <feFlood flood-opacity="0.161"/>
                  <feComposite operator="in" in2="blur-2"/>
                  <feComposite in="SourceGraphic"/>
                </filter>
                <linearGradient id="linear-gradient" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                  <stop offset="0" stop-color="#fee89e"/>
                  <stop offset="0.505" stop-color="#f0ce5b"/>
                  <stop offset="1" stop-color="#ffc500"/>
                </linearGradient>
                <filter id="path34" x="4" y="10.096" width="35" height="29" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha"/>
                  <feGaussianBlur stdDeviation="1.5" result="blur-3"/>
                  <feFlood flood-opacity="0.161"/>
                  <feComposite operator="in" in2="blur-3"/>
                  <feComposite in="SourceGraphic"/>
                </filter>
              </defs>
              <g id="g10" transform="translate(2.5 47.096)">
                <g id="g12" transform="translate(0 -47.5)">
                  <g id="Group_14" data-name="Group 14">
                    <g id="g20" transform="translate(2 9)">
                      <g transform="matrix(1, 0, 0, 1, -4.5, -8.6)" filter="url(#path22)">
                        <path id="path22-2" data-name="path22" d="M-8.5-5.75s0,4-4,4h-26c-4,0-4-4-4-4v-19c0-4,4-4,4-4h26s4,0,4,4Z" transform="translate(47 37.35)" fill="#414042"/>
                      </g>
                    </g>
                    <g id="g24" transform="translate(11.403 1.904)">
                      <path id="path26" d="M-2.725-2.371a1,1,0,0,1,0,1.414,1,1,0,0,1-1.414,0l-9.192-9.192a1,1,0,0,1,0-1.414,1,1,0,0,1,1.414,0Z" transform="translate(13.624 11.857)" fill="#414042"/>
                    </g>
                    <g id="g28" transform="translate(15.404 1.904)">
                      <g transform="matrix(1, 0, 0, 1, -17.9, -1.5)" filter="url(#path30)">
                        <path id="path30-2" data-name="path30" d="M-.073-2.371a1,1,0,0,0,0,1.414,1,1,0,0,0,1.414,0l9.192-9.192a1,1,0,0,0,0-1.414,1,1,0,0,0-1.414,0Z" transform="translate(18.27 13.36)" fill="#414042"/>
                      </g>
                    </g>
                    <g id="g32" transform="translate(6 12)">
                      <g transform="matrix(1, 0, 0, 1, -8.5, -11.6)" filter="url(#path34)">
                        <path id="path34-2" data-name="path34" d="M-3.25,0c8,0,10,1,11,2s2,3,2,8-1,7-2,8-3,2-11,2-10-1-11-2-2-3-2-8,1-7,2-8,3-2,11-2" transform="translate(24.75 11.6)" fill="url(#linear-gradient)"/>
                      </g>
                    </g>
                    <g id="g36" transform="translate(31 31)">
                      <path id="path38" d="M0-.375a1.5,1.5,0,0,1,1.5-1.5A1.5,1.5,0,0,1,3-.375a1.5,1.5,0,0,1-1.5,1.5A1.5,1.5,0,0,1,0-.375" transform="translate(0 1.875)" fill="#66757f"/>
                    </g>
                    <g id="g40" transform="translate(4 31)">
                      <path id="path42" d="M0-.375a1.5,1.5,0,0,1,1.5-1.5A1.5,1.5,0,0,1,3-.375a1.5,1.5,0,0,1-1.5,1.5A1.5,1.5,0,0,1,0-.375" transform="translate(0 1.875)" fill="#66757f"/>
                    </g>
                  </g>
                </g>
              </g>
            </svg>
            
            <span id="TV-name" class="normal-button-text">{{device.device}}</span>
            <div [ngClass]="device.payload ==0 ? 'on' : 'off'"></div>
          </div>
        </ng-template>
        <ng-template [ngIf]="device.device==='Power1'">
          <div ng-if="device.display=='none'" (click)="alter(device,room)" id="Power1"
            [ngClass]="device.display=='block'? 'show':'hide'">
            <svg  class="normal-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="37.186" height="49.112" viewBox="0 0 37.186 49.112">
              <defs>
                <linearGradient id="linear-gradient" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                  <stop offset="0" stop-color="#f2e29b"/>
                  <stop offset="1" stop-color="#ffcf00"/>
                </linearGradient>
                <filter id="Path_57" x="13.031" y="0" width="20.769" height="31.545" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha"/>
                  <feGaussianBlur stdDeviation="3" result="blur"/>
                  <feFlood flood-opacity="0.349"/>
                  <feComposite operator="in" in2="blur"/>
                  <feComposite in="SourceGraphic"/>
                </filter>
                <filter id="Path_60" x="3.507" y="0" width="20.769" height="31.545" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha"/>
                  <feGaussianBlur stdDeviation="3" result="blur-2"/>
                  <feFlood flood-opacity="0.349"/>
                  <feComposite operator="in" in2="blur-2"/>
                  <feComposite in="SourceGraphic"/>
                </filter>
                <filter id="Path_59" x="0" y="12.258" width="37.186" height="36.854" filterUnits="userSpaceOnUse">
                  <feOffset dy="3" input="SourceAlpha"/>
                  <feGaussianBlur stdDeviation="3" result="blur-3"/>
                  <feFlood flood-opacity="0.349"/>
                  <feComposite operator="in" in2="blur-3"/>
                  <feComposite in="SourceGraphic"/>
                </filter>
              </defs>
              <g id="Group_13" data-name="Group 13" transform="translate(-896.814 -445)">
                <path id="Path_54" data-name="Path 54" d="M136,168.813a.829.829,0,0,1-.845.813H117.645a.829.829,0,0,1-.845-.813h0a.829.829,0,0,1,.845-.813h17.57a.817.817,0,0,1,.785.813Z" transform="translate(789 294.445)" fill="#151918"/>
                <g transform="matrix(1, 0, 0, 1, 896.81, 445)" filter="url(#Path_57)">
                  <path id="Path_57-2" data-name="Path 57" d="M295.518,12.245a1.347,1.347,0,0,1-1.354,1.3h-.056a1.347,1.347,0,0,1-1.354-1.3V1.3a1.262,1.262,0,0,1,1.3-1.3h.056a1.361,1.361,0,0,1,1.411,1.3Z" transform="translate(-270.72 6)" fill="url(#linear-gradient)"/>
                </g>
                <g transform="matrix(1, 0, 0, 1, 896.81, 445)" filter="url(#Path_60)">
                  <path id="Path_60-2" data-name="Path 60" d="M295.518,12.245a1.347,1.347,0,0,1-1.354,1.3h-.056a1.347,1.347,0,0,1-1.354-1.3V1.3a1.262,1.262,0,0,1,1.3-1.3h.056a1.361,1.361,0,0,1,1.411,1.3Z" transform="translate(-280.24 6)" fill="url(#linear-gradient)"/>
                </g>
                <g transform="matrix(1, 0, 0, 1, 896.81, 445)" filter="url(#Path_59)">
                  <path id="Path_59-2" data-name="Path 59" d="M108,184v9.481a9.6,9.6,0,0,0,19.186,0V184Z" transform="translate(-99 -165.74)" fill="#424e4c"/>
                </g>
              </g>
            </svg>
            
            <span id="Power1-name" class="normal-button-text">{{device.device}}</span>
            <div [ngClass]="device.payload ==0 ? 'on' : 'off'"></div>
          </div>
        </ng-template>
        <ng-template [ngIf]="device.device==='AC'">
          <div id="AC">
        <input type="range" min="-10" max="40" value="24" id="AC-slider" (click)="alter(device,room)">
        <span id="ACName" (click)="alter(device,room)">{{device.device}}</span>
        <svg (click)="alter(device,room)" class="AC-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="64" height="55.006" viewBox="0 0 64 55.006">
          <defs>
            <filter id="Path_92" x="0" y="7.506" width="64" height="28" filterUnits="userSpaceOnUse">
              <feOffset dy="3" input="SourceAlpha"/>
              <feGaussianBlur stdDeviation="3" result="blur"/>
              <feFlood flood-opacity="0.161"/>
              <feComposite operator="in" in2="blur"/>
              <feComposite in="SourceGraphic"/>
            </filter>
            <filter id="Path_93" x="7.5" y="11.998" width="52" height="19.009" filterUnits="userSpaceOnUse">
              <feOffset dy="3" input="SourceAlpha"/>
              <feGaussianBlur stdDeviation="1.5" result="blur-2"/>
              <feFlood flood-opacity="0.161"/>
              <feComposite operator="in" in2="blur-2"/>
              <feComposite in="SourceGraphic"/>
            </filter>
            <filter id="Path_94" x="4.5" y="22.006" width="55" height="17" filterUnits="userSpaceOnUse">
              <feOffset dy="3" input="SourceAlpha"/>
              <feGaussianBlur stdDeviation="1.5" result="blur-3"/>
              <feFlood flood-opacity="0.161"/>
              <feComposite operator="in" in2="blur-3"/>
              <feComposite in="SourceGraphic"/>
            </filter>
            <filter id="Rectangle_41" x="9.5" y="26.006" width="45" height="13" filterUnits="userSpaceOnUse">
              <feOffset dy="3" input="SourceAlpha"/>
              <feGaussianBlur stdDeviation="1.5" result="blur-4"/>
              <feFlood flood-opacity="0.161"/>
              <feComposite operator="in" in2="blur-4"/>
              <feComposite in="SourceGraphic"/>
            </filter>
            <linearGradient id="linear-gradient" x1="0.5" y1="-0.421" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
              <stop offset="0" stop-color="#fada6d"/>
              <stop offset="1" stop-color="#ffa900"/>
            </linearGradient>
            <filter id="Path_99" x="24.376" y="4.041" width="15.254" height="11.852" filterUnits="userSpaceOnUse">
              <feOffset dy="3" input="SourceAlpha"/>
              <feGaussianBlur stdDeviation="1.5" result="blur-5"/>
              <feFlood flood-opacity="0.161"/>
              <feComposite operator="in" in2="blur-5"/>
              <feComposite in="SourceGraphic"/>
            </filter>
            <filter id="Path_100" x="21.546" y="0" width="20.908" height="19.006" filterUnits="userSpaceOnUse">
              <feOffset dy="3" input="SourceAlpha"/>
              <feGaussianBlur stdDeviation="1.5" result="blur-6"/>
              <feFlood flood-opacity="0.161"/>
              <feComposite operator="in" in2="blur-6"/>
              <feComposite in="SourceGraphic"/>
            </filter>
            <filter id="Path_101" x="7.5" y="22.006" width="52" height="33" filterUnits="userSpaceOnUse">
              <feOffset dy="3" input="SourceAlpha"/>
              <feGaussianBlur stdDeviation="1.5" result="blur-7"/>
              <feFlood flood-opacity="0.161"/>
              <feComposite operator="in" in2="blur-7"/>
              <feComposite in="SourceGraphic"/>
            </filter>
          </defs>
          <g id="Air_Conditioner" data-name="Air Conditioner" transform="translate(8 0.506)">
            <g transform="matrix(1, 0, 0, 1, -8, -0.51)" filter="url(#Path_92)">
              <path id="Path_92-2" data-name="Path 92" d="M47,15v8H1V15a2,2,0,0,1,2-2H45A2,2,0,0,1,47,15Z" transform="translate(8 0.51)" fill="#ddd"/>
            </g>
            <g transform="matrix(1, 0, 0, 1, -8, -0.51)" filter="url(#Path_93)">
              <path id="Path_93-2" data-name="Path 93" d="M47,14.6V23H4V13H45A1.84,1.84,0,0,1,47,14.6Z" transform="translate(8 0.51)" fill="#c9c9c9"/>
            </g>
            <g transform="matrix(1, 0, 0, 1, -8, -0.51)" filter="url(#Path_94)">
              <path id="Path_94-2" data-name="Path 94" d="M47,23v6a2,2,0,0,1-2,2H42V27H6v4H3a2,2,0,0,1-2-2V23Z" transform="translate(8 0.51)" fill="#a1a5a7"/>
            </g>
            <g transform="matrix(1, 0, 0, 1, -8, -0.51)" filter="url(#Rectangle_41)">
              <path id="Rectangle_41-2" data-name="Rectangle 41" d="M0,0H36a0,0,0,0,1,0,0V2a2,2,0,0,1-2,2H2A2,2,0,0,1,0,2V0A0,0,0,0,1,0,0Z" transform="translate(14 27.51)" fill="#545252"/>
            </g>
            <path id="Path_97" data-name="Path 97" d="M44,18a1,1,0,1,0-1,1,1,1,0,0,0,1-1" fill="#efb902"/>
            <path id="Path_98" data-name="Path 98" d="M40,18a1,1,0,1,0-1,1,1,1,0,0,0,1-1" fill="#6fabe6"/>
            <g transform="matrix(1, 0, 0, 1, -8, -0.51)" filter="url(#Path_99)">
              <path id="Path_99-2" data-name="Path 99" d="M25.41,7.59a2,2,0,0,0-2.82,0,1,1,0,1,1-1.42-1.42c2.62-2.62,7.17-.09,5.66,1.42a1,1,0,0,1-1.42,0Z" transform="translate(8 0.51)" fill="url(#linear-gradient)"/>
            </g>
            <g transform="matrix(1, 0, 0, 1, -8, -0.51)" filter="url(#Path_100)">
              <path id="Path_100-2" data-name="Path 100" d="M28.24,4.76a6,6,0,0,0-8.48,0,1,1,0,1,1-1.42-1.42,8,8,0,0,1,11.32,0,1,1,0,1,1-1.42,1.42ZM25,10a1,1,0,1,0-1,1,1,1,0,0,0,1-1" transform="translate(8 0.51)" fill="url(#linear-gradient)"/>
            </g>
            <g transform="matrix(1, 0, 0, 1, -8, -0.51)" filter="url(#Path_101)">
              <path id="Path_101-2" data-name="Path 101" d="M23,46V38a1,1,0,0,1,2,0v8a1,1,0,0,1-2,0ZM10,47a1,1,0,0,1,0-2,5,5,0,0,0,5-5V38a1,1,0,0,1,2,0v2A7,7,0,0,1,10,47Zm28,0a7,7,0,0,1-7-7V38a1,1,0,0,1,2,0v2a5,5,0,0,0,5,5,1,1,0,0,1,0,2ZM4,23v4H4a2,2,0,0,0,2,2V27H42v2h5V23Z" transform="translate(8 0.51)" fill="#7a7a7a"/>
            </g>
          </g>
        </svg>
        
        <div [ngClass]="device.payload ==0 ? 'on' : 'off'" (click)="alter(device,room)"></div>
        <span id="ACPer"></span>
      </div>
        </ng-template>
       
      </div>
    </ion-row> -->
  <app-devices [parentRoom]=room (countChanged)="countChangedHandler($event)"></app-devices>
  </ion-grid>
  <!-- <ion-toggle ></ion-toggle> -->
  <!-- </ion-card> -->
</div>